*** Settings ***
Library    SeleniumLibrary

*** Variables ***
${TIMEOUT}    10
${nom_du_site}    l'equipe2     
${lien}    Liens vers recherche google   
   
*** Keywords ***
Supprimerunlien(dans un site déjà créé)
    [Documentation]    
    ...    Se connecter sur l`application Alfersco avec un compte adminstrateur 
    ...    Avoir un site  recement consulte
    ...    Avoir un lien sur ce site
    ...    Avoir le bloc Liens du site dans le tableau de bord de ce site (dans le colonne 3)
    
    #${lien} : contient le nom du lien 
    #${nom_du_site}  : contient le nom du site  
     
    [Arguments]    ${TIMEOUT}    ${nom_du_site}    ${lien}    
    # Definir la valeur de timeout pour le cas de test
    Set Selenium Timeout    ${TIMEOUT}   
    #Cliquer sur le Lien Sites       
    Click Element    xpath=//*[@id="HEADER_SITES_MENU_text"]
    #Cliquer sur le site recement consulte ($nom_du_site )
    Wait Until Element Is Visible    xpath://*[@id="HEADER_SITES_MENU_RECENT_site-de-lequipe2_text"]/a 
    Click Link    xpath://*[@id="HEADER_SITES_MENU_RECENT_site-de-lequipe2_text"]/a    
    # S`assurer que le bloc Liens du site est bien dans le tableau de bord affichee et puis Cliquer sur Details du lien de ${lien} 
    Wait Until Page Contains    ${nom_du_site}  
    Click Element    xpath://*[@id="page_x002e_component-3-1_x002e_site_x007e_site-de-lequipe2_x007e_dashboard_x0023_default-details-span-1"]
    # S`assurer qu`on est bien dans la page de details de lien ${lien}  et puis Cliquer sur le bouton Supprimer 
    Wait Until Element Is Visible    xpath://*[@id="template_x002e_linksview_x002e_links-view_x0023_default"]/div[1]/div[1]/div/span/a    
    Click Element    xpath://*[@id="template_x002e_linksview_x002e_links-view_x0023_default-linksview"]/div[1]/div[2]/a
    Wait Until Element Is Visible    xpath://*[@id="yui-gen17-button"]
    #Cliquer sur le button supprimer dans la boite de dialouge
    Click Button    xpath://*[@id="yui-gen17-button"]
     #Fermer la navigateur    
    Close All Browsers    

 
    